import{_ as f}from"./UiButton.4f919c66.js";import{s as h,k as x,x as S,b as v,d as l,y as _,z as w,u as a,f as C,w as V,n as E,A as F,o as I,i as k,t as B}from"./vendor-vue.a4f77483.js";import"./vite.c27b6911.js";const N=["onSubmit","data-site-id"],P=["for"],T=["id","placeholder","disabled","onChange","onInvalid"],D={__name:"SignupForm",props:{buttonLabel:{type:String,default:"Submit"},placeholder:{type:String,default:"Enter your email..."},name:{type:String,required:!0},siteId:{type:String,default:""}},setup(e){const r=e,n=r==null?void 0:r.siteId,s=h(""),u=x(()=>({data:{email:s.value,siteId:n}})),c={immediate:!1,headers:{"Content-Type":"application/json"}},{execute:m,error:$,isFetching:o,onFetchError:p,onFetchResponse:y}=S("https://us-west2-mixo-app.cloudfunctions.net/signup",c).post(u).json(),b=()=>{if(!n){alert("⚠️ You can only submit an email once your site is published. Please publish first and try again.");return}m()};return y(i=>{console.log(i.status),alert("Success! We'll be in touch soon!"),s.value=""}),p(i=>{console.error(i.message),alert("😮 Sorry we couldn't add your email due to a technical error. Please try again.")}),(i,d)=>{const g=f;return I(),v("form",{class:E(["grid gap-2 grid-cols-1 sm:w-full sm:flex sm:items-center sm:flex-wrap",{"opacity-50":a(o)}]),onSubmit:F(b,["prevent"]),"data-site-id":a(n)},[l("label",{for:`${e.name}-email`,class:"sr-only"},"Email address",8,P),_(l("input",{id:`${e.name}-email`,"onUpdate:modelValue":d[0]||(d[0]=t=>s.value=t),type:"email",class:"block w-full px-5 py-3 text-base text-gray-900 placeholder-gray-500 border border-gray-300 rounded-md shadow-sm focus:border-primary focus:ring-primary focus-visible:ring-primary flex-1",required:"",placeholder:e.placeholder,disabled:a(o),onChange:t=>t.target.setCustomValidity(""),onInvalid:t=>t.target.setCustomValidity("Please enter a valid email address.")},null,40,T),[[w,s.value]]),l("div",null,[C(g,{type:"submit",theme:"primary",disabled:a(o)},{default:V(()=>[k(B(a(o)?"Submitting...":e.buttonLabel),1)]),_:1},8,["disabled"])])],42,N)}}};export{D as _};
